{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport {LoginPage} from \"./login\";\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n  entryComponents: [\n    LoginPage\n  ],\n  exports:[LoginPage]\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import {Component} from \"@angular/core\";\nimport {NavController, AlertController, ToastController, MenuController, IonicPage, Events} from \"ionic-angular\";\nimport {RegisterPage} from \"../register/register\";\nimport {AuthProvider} from \"../../providers/auth/auth\";\nimport {RecherchemedecinPage} from \"../recherchemedecin/recherchemedecin\";\nimport {FormBuilder, FormGroup, Validators, AbstractControl} from \"@angular/forms\";\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html'\n})\nexport class LoginPage {\n  formgroup: FormGroup;\n  email: AbstractControl;\n  password: AbstractControl;\n\n  constructor(public nav: NavController, private authService: AuthProvider, public forgotCtrl: AlertController,\n              public menu: MenuController, public toastCtrl: ToastController, public formbuilder: FormBuilder, public events: Events) {\n\n    this.menu.swipeEnable(false);\n\n    this.formgroup = formbuilder.group({\n      email: ['', Validators.required, Validators.minLength(5)],\n      password: ['', Validators.required, Validators.maxLength(15)]\n    });\n    this.email = this.formgroup.controls['email'];\n    this.password = this.formgroup.controls['password'];\n  }\n\n  loginData: any = {\n    email: '',\n    password: ''\n  };\n\n  login(loginData) {\n\n    this.authService.loginUser(loginData).subscribe(res => {\n      ///  console.log(JSON.stringify(res));\n      console.log(res.user)\n\n      this.events.publish('us', res.user, Date.now());\n      this.authService.setItem(res.user._id);\n      localStorage.setItem('iduser',res.user._id)\n      console.log(res.user._id)\n      this.events.publish('med', '0', Date.now());\n\n      if (res != null) {\n\n        this.authService.getmedecin(res.user.email).subscribe(result => {\n          localStorage.setItem('idmedecin',result[0]._id)\n          console.log(result[0]._id)\n\n          console.log(\"res login \", result.length)\n\n\n             this.events.publish('med', '1', Date.now());\n\n          console.log(\"res login \", result == null)\n        },error2 => {\n\n          console.log('okkkkkkkkkkkkkkkkkkkkkkkkk665')\n        })\n\n       localStorage.setItem(\"iduser\", res.user._id);\n\n        this.nav.setRoot('RecherchemedecinPage');\n\n\n        //  localStorage.setItem('userid',res.user._id)\n        //\n\n        //localStorage.setItem('user',res.user)\n\n      }\n      else {\n\n        this.nav.push('LoginPage');\n\n      }\n\n    })\n  }\n\n  // go to register page\n  register() {\n    this.nav.setRoot('RegisterPage');\n  }\n\n  // login and go to home page\n\n  forgotPass() {\n    let forgot = this.forgotCtrl.create({\n      title: 'Mot de passe oublié?',\n      message: \"Entrer votre adresse email pour envoyer un mot de passe de réinitialisation.\",\n      inputs: [\n        {\n          name: 'email',\n          placeholder: 'Email',\n          type: 'email'\n        },\n      ],\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: data => {\n            console.log('Cancel clicked');\n          }\n        },\n        {\n          text: 'Send',\n          handler: data => {\n            console.log('Send clicked');\n            let toast = this.toastCtrl.create({\n              message: 'L\\'email a été envoyé avec succès',\n              duration: 3000,\n              position: 'top',\n              cssClass: 'dark-trans',\n              closeButtonText: 'OK',\n              showCloseButton: true\n            });\n            toast.present();\n          }\n        }\n      ]\n    });\n    forgot.present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}